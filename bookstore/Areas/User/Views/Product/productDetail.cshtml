@{

	Layout = "~/Areas/User/Views/Shared/_Layout.cshtml";
	ViewData["title"] = "Trang chi tiết sản phẩm";
}

<div class="section">
	<div class="container">

		<div class="row">

			<div class="col-md-5 col-md-push-2">
				<div id="product-main-img">

					<div class="product-preview">
						<img src="@ViewBag.book.Book.cover" alt="">
					</div>

					@foreach (var item in ViewBag.thumbnail)
					{
						<div class="product-preview">
							<img src="@item.image" alt="">
						</div>
					}

				

					
				</div>
			</div>


			<div class="col-md-2 col-md-pull-5">
				<div id="product-imgs">

					<div class="product-preview">
						<img src="@ViewBag.book.Book.cover" alt="">
					</div>

					@foreach (var item in ViewBag.thumbnail)
					{
						<div class="product-preview">
							<img src="@item.image" alt="">
						</div>
					}

		
				</div>
			</div>



			<div class="col-md-5">
				<div class="product-details">
					<h2 class="product-name">@ViewBag.book.Book.title</h2>

					<div>
						<div class="product-rating">
							@if ( @ViewBag.RatingAverage != null)
							{
								@for (double i = 0; i < @ViewBag.RatingAverage; i++)
								{
									<i class="fa fa-star" i></i>


								}
								@for (double j = @ViewBag.RatingAverage + 1; j <= 5; j++)
								{
									<i class="fa fa-star-o" j></i>

								}
								<a class="review-link" style="cursor: pointer;">@ViewBag.total bình luận</a>

							}
							else{
									<i class="fa fa-star-o" j></i>
									<i class="fa fa-star-o" j></i>
								<i class="fa fa-star-o" j></i>
								<i class="fa fa-star-o" j></i>
								<a class="review-link" style="cursor: pointer;">0 bình luận</a>


							}

							
						</div>
					</div>
					<ul class="product-links">
						<li>Lượt xem :</li>
						<li><a href="#">@(ViewBag.book.Book.view)</a></li>
					</ul>

					<ul class="product-links">
						<li>Thể loại:</li>
						<li><a href="#">@(ViewBag.book.Genre)</a></li>
					</ul>

					<ul class="product-links">
						<li>Tác giả:</li>
						<li><a href="#">@ViewBag.book.Author</a></li>
					</ul>

					@if( ViewBag.book.Book.discount > 0)
					{
						<div>
							<h3 class="product-price">@((ViewBag.book.Book.unitPrice - (ViewBag.book.Book.unitPrice * (ViewBag.book.Book.discount / 100))).ToString("#,##0 đ")) <del class="product-old-price">@ViewBag.book.Book.unitPrice.ToString("#,##0 đ")</h3>
							@if( ViewBag.book.Book.unitStock > 0)
							{
								<span class="product-available">Còn hàng</span>

							}
							else
							{
								<span class="product-available">Hết hàng</span>

							}

						
						</div>
					}
					else
					{
						<div>
							<h3 class="product-price">@ViewBag.book.Book.unitPrice.ToString("#,##0 đ")</h3>

							@if (ViewBag.book.Book.unitStock > 0)
							{
								<span class="product-available">Còn hàng</span>

							}
							else
							{
								<span class="product-available">Hết hàng</span>

							}
						</div>





					}

				



					
					<p>@ViewBag.book.Book.description</p>

					<form method="post" asp-action="AddToCart" asp-controller="shoppingCart" asp-route-productid="@ViewBag.book.Book.Id">

					<div class="add-to-cart">
						<div class="qty-label">
							<div class="input-number">
								<input type="number" value="1" name="quantity">
								<span class="qty-up">+</span>
								<span class="qty-down">-</span>
							</div>
						</div>
						<button type="submit" class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> Thêm vào giỏ hàng</button>
					</div>
					</form>




				</div>
			</div>



			<div class="col-md-12">
				<div id="product-tab">
					<ul class="tab-nav">
						<li class="active"><a data-toggle="tab" href="#tab1">Miêu tả</a></li>
						<li><a data-toggle="tab" href="#tab2">Đánh giá</a></li>
					</ul>


					<div class="tab-content">

						<div id="tab1" class="tab-pane fade in active">
							<div class="row">
								<div class="col-md-12">
									<h2>Thông tin sản phẩm</h2>
									<p>Mã hàng : @ViewBag.book.Book.isbn </p>
									<p>Tác giả : @ViewBag.book.Author </p>
									<p>NXB : @ViewBag.book.Publisher </p>
									<p>Năm XB : @ViewBag.book.Book.publishDate.ToString("dd-MM-yyyy") </p>
									<p>Trọng lượng (gr) : @ViewBag.book.Book.weight </p>
									<p>Kích thước : @ViewBag.book.Book.hSize x @ViewBag.book.Book.wSize </p>
									<p>Số trang : @ViewBag.book.Book.numPages </p>
									<p>Người Dịch : @ViewBag.book.Book.translatorName </p>

								</div>
								<div class="col-md-12">
									@ViewBag.book.Book.description
								</div>
							</div>
						</div>


						<div id="tab2" class="tab-pane fade in">
							<div class="row">

								<div class="col-md-4">
									<div id="rating">
										<div class="rating-avg">
											<span>@ViewBag.RatingAverage</span>
											<div class="rating-stars">

												@if (@ViewBag.RatingAverage != null)
												{
													@for (double i = 0; i < @ViewBag.RatingAverage; i++)
													{
														<i class="fa fa-star" i></i>


													}
													@for (double j = @ViewBag.RatingAverage + 1; j <= 5; j++)
													{
														<i class="fa fa-star-o" j></i>

													}
												}
												else
												{
														<i class="fa fa-star-o" j></i>
														<i class="fa fa-star-o" j></i>
														<i class="fa fa-star-o" j></i>
														<i class="fa fa-star-o" j></i>
														<i class="fa fa-star-o" j></i>
													

												}


												
												
											</div>
										</div>
										<ul class="rating">

											<li>
												<div class="rating-stars">
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
												</div>
												<div class="rating-progress">
													<div style="width: @ViewBag.fiveStar%;"></div>
												</div>
												<span class="sum">@(ViewBag.totalcommet != null ?  ViewBag.totalcommet.Sfive : 0)</span>
											</li>

											<li>
												<div class="rating-stars">
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star-o"></i>
												</div>
												<div class="rating-progress">
													<div style="width: @ViewBag.fourStar%;"></div>
												</div>
												<span class="sum">@(ViewBag.totalcommet != null ? ViewBag.totalcommet.Sfour : 0)</span>
											</li>

											<li>
												<div class="rating-stars">
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star-o"></i>
													<i class="fa fa-star-o"></i>
												</div>
												<div class="rating-progress">
													<div style="width: @ViewBag.threeStar%;"></div>
												</div>
												<span class="sum">@(ViewBag.totalcommet != null ? ViewBag.totalcommet.Sthree : 0)</span>
											</li>

											<li>
												<div class="rating-stars">
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star-o"></i>
													<i class="fa fa-star-o"></i>
													<i class="fa fa-star-o"></i>
												</div>
												<div class="rating-progress">
													<div style="width: @ViewBag.twoStar%;"></div>
												</div>
												<span class="sum">@(ViewBag.totalcommet != null ? ViewBag.totalcommet.Stwo : 0)</span>
											</li>

											<li>
												<div class="rating-stars">
													<i class="fa fa-star"></i>
													<i class="fa fa-star-o"></i>
													<i class="fa fa-star-o"></i>
													<i class="fa fa-star-o"></i>
													<i class="fa fa-star-o"></i>
												</div>
												<div class="rating-progress">
													<div style="width: @ViewBag.oneStar%;"></div>
												</div>
												<span class="sum">@(ViewBag.totalcommet != null ? ViewBag.totalcommet.SOne : 0)</span>
											</li>

										</ul>
									</div>
								</div>

								<div class="col-md-8">
									<div id="reviews">
										<ul class="reviews">

											@if ( @ViewBag.customerReview != null)
											{
												@foreach (var item in @ViewBag.customerReview)
												{
													<li>
														<div class="review-heading">
															<h5 class="name">@item.customer.firstName @item.customer.lastName</h5>
															<p class="date">@item.review.DateTime.ToString("dd-MM-yyyy")</p>
															<div class="review-rating">
																@for (double i = 0; i < @item.review.ranking; i++)
																{
																	<i class="fa fa-star" i></i>


																}
																@for (double j = @item.review.ranking + 1; j <= 5; j++)
																{
																	<i class="fa fa-star-o" j></i>

																}

															</div>
														</div>
														<div class="review-body">
															<p>@item.review.comment</p>
														</div>
													</li>
												}
											}
											else
											{
												<span>Chưa có đánh giá cho sản phẩm</span>
											}

										




										
											
										</ul>
										<ul class="reviews-pagination">
											<li class="active">1</li>
											<li><a href="#">2</a></li>
											<li><a href="#">3</a></li>
											<li><a href="#">4</a></li>
											<li><a href="#"><i class="fa fa-angle-right"></i></a></li>
										</ul>
									</div>
								</div>

							</div>
						</div>

					</div>
				</div>
			</div>



		</div>
		<!-- /row -->
	</div>
	<!-- /container -->
</div>

<!-- Sách nổi bật -->
<div class="section">
	<!-- container -->
	<div class="container">
		<!-- row -->
		<div class="box">
			<div class="row">
				<!-- section title -->
				<div class="col-md-12">
					<div class="section-title">
						<h3 class="title">Sách cùng thể loại</h3>
					</div>
				</div>
				<!-- /section title -->
				<!-- Products tab & slick -->
				<div class="col-md-12">
					<div class="row">
						<div class="products-tabs">
							<!-- tab -->
							<div id="tab1" class="tab-pane active">
								<div class="products-slick" data-nav="#slick-nav-2">

									@foreach (var item in ViewBag.BookGenre)
									{
										<div class="product">
											<a asp-action="productDetail" asp-controller="product" asp-route-id="@item.Book.Id">
												<div class="product-img">
													<img src="@item.Book.cover" alt="">
												</div>
											</a>
											<div class="product-body">
												<p class="product-category">@item.Genre</p>
												<h3 class="product-name"><a href="/">@item.Book.title</a></h3>
												<p class="product-category"><a href="#">@item.Author</a></p>
												@if(item.Book.discount > 0)
												{
													<h4 class="product-price">@( (item.Book.unitPrice - (item.Book.unitPrice * (item.Book.discount/100))).ToString("#,##0.00 đ")) <del class="product-old-price">@item.Book.unitPrice.ToString("#,##0.00 đ")</del></h4>

												}
												else
												{
													<h4 class="product-price">@item.Book.unitPrice.ToString("#,##0 đ") </h4>

												}


											</div>
										</div>
									}

									


								</div>
								<div id="slick-nav-2" class="products-slick-nav"></div>
							</div>
							<!-- /tab -->
						</div>
					</div>
				</div>
				<!-- Products tab & slick -->
			</div>
		</div>
		<!-- /row -->
	</div>
	<!-- /container -->
</div>
